<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>zentity - Multiple Attribute Resolution</title>
    <meta name="viewport" content="width=device-width, initial-scale=0.8"/>
    <meta name="description" content="zentity brings entity resolution to Elasticsearch. Connect the hidden fragments of an identity in your data. Fast, scalable, open source."/>
    <meta property="og:title" content="zentity - Entity Resolution for Elasticsearch"/>
    <meta property="og:description" content="Connect the hidden fragments of an identity in your data. Fast, scalable, open source."/>
    <meta property="og:image" content="/img/zentity-og-image.png"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://zentity.io/"/>
    <meta name="twitter:title" content="zentity - Entity Resolution for Elasticsearch"/>
    <meta name="twitter:description" content="Connect the hidden fragments of an identity in your data. Fast, scalable, open source."/>
    <link rel="icon" type="image/x-icon" href="/img/favicon.ico"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet"/>
    <link rel="stylesheet" href="/css/all.css?id=548904251"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-27325874-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-27325874-2');
      var to = function(uri, event_category) {
        gtag('event', 'click', {
          'event_category': event_category,
          'event_label': uri,
          'transport_type': 'beacon',
          'event_callback': function(){document.location = uri;}
        });
      };
    </script><script src="/js/all.js?id=749270076"></script>
  </head>
  <body>
    <div id="app" >
      <div id="top"><div id="nav">
          <div style="max-width:950px;margin:0 auto;">
            <a href="/">
              <h1 aria-label="zentity">
                <span style="color:rgb(0,169,224)">z</span><span style="color:rgb(14,119,205)">en</span><span style="color:rgb(31,73,125)">tity</span>
              </h1>
            </a>
            <div id="buttons">
              <a href="/docs">
                <button type="button" class="btn btn-sm btn-primary" aria-label="Docs">
                  Documentation
                </button>
              </a>
              <a href="/releases">
                <button type="button" class="btn btn-sm btn-link" aria-label="Releases">
                  Releases
                </button>
              </a>
              <a href="https://github.com/zentity-io/zentity" title="Github" onclick="to('https://github.com/zentity-io/zentity');">
                <button type="button" class="btn btn-sm btn-link" aria-label="Github">
                  Github
                </button>
              </a>
            </div>
          </div>
        </div></div>
      <div id="main" class="content">
        <p><a href="/">Home</a> / <a href="/docs">Documentation</a> / <a href="/docs/basic-usage">Basic Usage</a> / Multiple Attribute Resolution</p>
<h4><a name="contents"></a>Basic Usage Tutorials</h4>
<p>This tutorial is part of a series to help you learn and perform the basic functions of zentity. Each tutorial adds a little more
sophistication to the prior tutorials, so you can start simple and learn the more advanced features over time.</p>
<ol>
<li><a href="/docs/basic-usage/exact-name-matching">Exact Name Matching</a></li>
<li><a href="/docs/basic-usage/robust-name-matching">Robust Name Matching</a></li>
<li><strong>Multiple Attribute Resolution</strong> <em>&#8592; You are here.</em></li>
<li><a href="/docs/basic-usage/multiple-resolver-resolution">Multiple Resolver Resolution</a></li>
<li><a href="/docs/basic-usage/cross-index-resolution">Cross Index Resolution</a></li>
</ol>
<hr>
<h1><a name="multiple-attribute-resolution"></a>Multiple Attribute Resolution</h1>
<p>This tutorial adds more sophistication to the prior tutorials on <a href="/docs/basic-usage/exact-name-matching">exact name matching</a> and
<a href="/docs/basic-usage/robust-name-matching">robust name matching</a>. This time you will map <em>multiple attributes</em> to multiple fields
of a single index.</p>
<p>Never trust a single attribute in isolation, as a general rule.</p>
<p>Using a single attribute for entity resolution is a bad practice &ndash; an anti-pattern. It's an easy way to "snowball" many different entities
together and drive up your false positive rate. The problem with using a single attribute is that any attribute is prone to error. Many people can
share the same name or or date of birth. One address can be shared by family members or past residents. A Social Security Number can be forged,
reissued, shared, or mistyped. A bogus value such as "N/A" can link many entities together.</p>
<p>Instead, trust multiple attributes to corroborate a match.</p>
<p>Consider this an exercise in probability theory. Suppose you have an index of millions of people. What's the probability that two people share
the same name? It's probably high. What's the probability that people share the same name <em>and</em> the same phone number? It's probably much lower.</p>
<p>Let's dive in.</p>
<blockquote><p><strong>Important</strong></p>
<p>You must install <a href="https://www.elastic.co/downloads/elasticsearch" onclick="to('https://www.elastic.co/downloads/elasticsearch', 'outbound');" class="external">Elasticsearch</a>, <a href="https://www.elastic.co/downloads/kibana" onclick="to('https://www.elastic.co/downloads/kibana', 'outbound');" class="external">Kibana</a>, and <a href="/docs/installation">zentity</a> to complete this tutorial.
This tutorial was tested with <a href="/docs/releases">zentity-1.0.0-elasticsearch-6.2.4</a>.</p>
</blockquote>
<h2><a name="prepare"></a>1. Prepare for the tutorial</h2>
<h3><a name="install-phonetic-analysis-plugin"></a>1.1. Install the required plugins</h3>
<p>This tutorial uses the <a href="https://www.elastic.co/guide/en/elasticsearch/plugins/current/analysis-phonetic.html" onclick="to('https://www.elastic.co/guide/en/elasticsearch/plugins/current/analysis-phonetic.html', 'outbound');" class="external">phonetic analysis plugin</a>
and <a href="https://www.elastic.co/guide/en/elasticsearch/plugins/current/analysis-icu.html" onclick="to('https://www.elastic.co/guide/en/elasticsearch/plugins/current/analysis-icu.html', 'outbound');" class="external">ICU analysis plugin</a> for Elasticsearch. You will
need to stop Elasticsearch, install these plugin, and start Elasticsearch. You can learn more about Elasticsearch plugin management
<a href="https://www.elastic.co/guide/en/elasticsearch/plugins/current/plugin-management.html" onclick="to('https://www.elastic.co/guide/en/elasticsearch/plugins/current/plugin-management.html', 'outbound');" class="external">here</a>.</p>
<p>For Linux (in the <code>$ES_HOME</code> directory of a .tar.gz installation):</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#ac3e2bdfd8bb38f2f">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="ac3e2bdfd8bb38f2f"><div class="highlight"><pre><span></span>sudo bin/elasticsearch-plugin install analysis-phonetic
sudo bin/elasticsearch-plugin install analysis-icu
</pre></div>
</span>
        </div>
        <p>For Windows (in the <code>$ES_HOME</code> directory of a .zip installation):</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a9279892dbe35b1c5">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a9279892dbe35b1c5"><div class="highlight"><pre><span></span>bin/elasticsearch-plugin.bat install analysis-phonetic
bin/elasticsearch-plugin.bat install analysis-icu
</pre></div>
</span>
        </div>
        <h3><a name="open-kibana-console-ui"></a>1.2. Open the Kibana Console UI</h3>
<p>The <a href="https://www.elastic.co/guide/en/kibana/current/console-kibana.html" onclick="to('https://www.elastic.co/guide/en/kibana/current/console-kibana.html', 'outbound');" class="external">Kibana Console UI</a> makes it easy to submit requests to Elasticsearch and read responses.</p>
<h3><a name="delete-old-tutorial-indices"></a>1.3. Delete any old tutorial indices</h3>
<p>Let's start from scratch. Delete any tutorial indices you might have created from other tutorials.</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a4e42a4cb0878605a">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a4e42a4cb0878605a"><div class="highlight"><pre><span></span><span class="nx">DELETE</span> <span class="p">.</span><span class="nx">zentity</span><span class="o">-</span><span class="nx">tutorial</span><span class="o">-*</span>
</pre></div>
</span>
        </div>
        <h3><a name="create-tutorial-index"></a>1.4. Create the tutorial index</h3>
<p>Now create the index for this tutorial.</p>
<p><span class="code-overflow"></span></p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a37f10553c1fbb684">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a37f10553c1fbb684"><div class="highlight"><pre><span></span><span class="nx">PUT</span> <span class="p">.</span><span class="nx">zentity</span><span class="o">-</span><span class="nx">tutorial</span><span class="o">-</span><span class="nx">index</span>
<span class="p">{</span>
  <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;index&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;number_of_shards&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s2">&quot;number_of_replicas&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;analysis&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;analyzer&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;clean_analyzer&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;tokenizer&quot;</span><span class="o">:</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span>
            <span class="s2">&quot;filter&quot;</span><span class="o">:</span> <span class="p">[</span>
              <span class="s2">&quot;icu_normalizer&quot;</span><span class="p">,</span>
              <span class="s2">&quot;icu_folding&quot;</span>
            <span class="p">]</span>
          <span class="p">},</span>
          <span class="s2">&quot;phonetic_analyzer&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;tokenizer&quot;</span><span class="o">:</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span>
            <span class="s2">&quot;filter&quot;</span><span class="o">:</span> <span class="p">[</span>
              <span class="s2">&quot;icu_normalizer&quot;</span><span class="p">,</span>
              <span class="s2">&quot;icu_folding&quot;</span><span class="p">,</span>
              <span class="s2">&quot;phonetic_filter&quot;</span>
            <span class="p">]</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="s2">&quot;filter&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;phonetic_filter&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;phonetic&quot;</span><span class="p">,</span>
            <span class="s2">&quot;encoder&quot;</span><span class="o">:</span> <span class="s2">&quot;nysiis&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;mapping&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;doc&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;keyword&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;user&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
          <span class="s2">&quot;fields&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;phonetic&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
              <span class="s2">&quot;analyzer&quot;</span><span class="o">:</span> <span class="s2">&quot;clean&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;phonetic&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
              <span class="s2">&quot;analyzer&quot;</span><span class="o">:</span> <span class="s2">&quot;phonetic&quot;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="s2">&quot;phone&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
          <span class="s2">&quot;fields&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;keyword&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;keyword&quot;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="s2">&quot;email&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
          <span class="s2">&quot;fields&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;keyword&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;keyword&quot;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="s2">&quot;dob&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;date&quot;</span><span class="p">,</span>
          <span class="s2">&quot;format&quot;</span><span class="o">:</span> <span class="s2">&quot;yyyy-MM-dd&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;zip&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;integer&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <h3><a name="load-tutorial-data"></a>1.5. Load the tutorial data</h3>
<p>Add the tutorial data to the index.</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#aab9ec6d26b412761">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="aab9ec6d26b412761"><div class="highlight"><pre><span></span><span class="nx">POST</span> <span class="p">.</span><span class="nx">zentity</span><span class="o">-</span><span class="nx">tutorial</span><span class="o">-</span><span class="nx">index</span><span class="o">/</span><span class="nx">_bulk</span>
<span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <p>Here's what the tutorial data looks like.</p>
<table class="table">
<thead><tr>
<th style="text-align:left">id</th>
<th style="text-align:left">user</th>
<th style="text-align:left">phone</th>
<th style="text-align:left">email</th>
<th style="text-align:left">dob</th>
<th style="text-align:left">zip</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left">Alice</td>
<td style="text-align:left">555-123-4567</td>
<td style="text-align:left">alice@example.net</td>
<td style="text-align:left">1984-01-01</td>
<td style="text-align:left">90210</td>
</tr>
<tr>
<td style="text-align:left">2</td>
<td style="text-align:left">Alice</td>
<td style="text-align:left">555-123-4567</td>
<td style="text-align:left">alice@example.net</td>
<td style="text-align:left">1984-01-01</td>
<td style="text-align:left">90210</td>
</tr>
<tr>
<td style="text-align:left">3</td>
<td style="text-align:left">Elise</td>
<td style="text-align:left">555-987-6543</td>
<td style="text-align:left">elise@example.com</td>
<td style="text-align:left">1984-01-01</td>
<td style="text-align:left">90210</td>
</tr>
<tr>
<td style="text-align:left">4</td>
<td style="text-align:left">Bob</td>
<td style="text-align:left">555-555-5555</td>
<td style="text-align:left">bob@example.net</td>
<td style="text-align:left">1989-05-15</td>
<td style="text-align:left">90210</td>
</tr>
</tbody>
</table>
<h2><a name="create-entity-model"></a>2. Create the entity model</h2>
<p>Let's use the <a href="/docs/rest-apis/models-api">Models API</a> to create the entity model below. We'll review each part of the model in depth.</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a2716da34a230dbb1">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a2716da34a230dbb1"><div class="highlight"><pre><span></span><span class="nx">PUT</span> <span class="nx">_zentity</span><span class="o">/</span><span class="nx">models</span><span class="o">/</span><span class="nx">zentity</span><span class="o">-</span><span class="nx">tutorial</span><span class="o">-</span><span class="nx">person</span>
<span class="p">{</span>
  <span class="s2">&quot;attributes&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;phone&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;resolvers&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;name_phone&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;attributes&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;phone&quot;</span> <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;matchers&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;simple&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;clause&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;match&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;{{ field }}&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ value }}&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;fuzzy&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;clause&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;match&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;{{ field }}&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;query&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ value }}&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fuzziness&quot;</span><span class="o">:</span> <span class="s2">&quot;auto&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;exact&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;clause&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;term&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;{{ field }}&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ value }}&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
  <span class="p">},</span>
  <span class="s2">&quot;indices&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;.zentity-tutorial-index&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;fields&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;user&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;attribute&quot;</span><span class="o">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
          <span class="s2">&quot;matcher&quot;</span><span class="o">:</span> <span class="s2">&quot;fuzzy&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;user.clean&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;attribute&quot;</span><span class="o">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
          <span class="s2">&quot;matcher&quot;</span><span class="o">:</span> <span class="s2">&quot;simple&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;user.phonetic&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;attribute&quot;</span><span class="o">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
          <span class="s2">&quot;matcher&quot;</span><span class="o">:</span> <span class="s2">&quot;simple&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;phone.keyword&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;attribute&quot;</span><span class="o">:</span> <span class="s2">&quot;phone&quot;</span><span class="p">,</span>
          <span class="s2">&quot;matcher&quot;</span><span class="o">:</span> <span class="s2">&quot;exact&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <h3><a name="review-attributes"></a>2.1. Review the attributes</h3>
<p>We defined two attribute called <code>"name"</code> and <code>"phone"</code> as shown in this section:</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#acce8b27eb3370018">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="acce8b27eb3370018"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;attributes&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;phone&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <h3><a name="review-resolvers"></a>2.2. Review the resolvers</h3>
<p>We defined a single resolver called <code>"name_phone"</code> as shown in this section:</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#aab9d03b801309f1a">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="aab9d03b801309f1a"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;resolvers&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;name_phone&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;attributes&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;phone&quot;</span> <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <h3><a name="review-matchers"></a>2.3. Review the matchers</h3>
<p>We defined three matchers called <code>"simple"</code>, <code>"fuzzy"</code>, and <code>"exact"</code> as shown in this section:</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a69b123198ab85ae4">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a69b123198ab85ae4"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;matchers&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;simple&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;clause&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;match&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;{{ field }}&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ value }}&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;fuzzy&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;clause&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;match&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;{{ field }}&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;query&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ value }}&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fuzziness&quot;</span><span class="o">:</span> <span class="s2">&quot;auto&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;exact&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;clause&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;term&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;{{ field }}&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ value }}&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <p>The <code>"exact"</code> matcher uses a simple <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-term-query.html" onclick="to('https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-term-query.html', 'outbound');" class="external"><code>term</code> clause</a>.
<code>term</code> queries apply exact matching for <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/keyword.html" onclick="to('https://www.elastic.co/guide/en/elasticsearch/reference/current/keyword.html', 'outbound');" class="external"><code>keyword</code></a> fields,
while <code>match</code> queries apply fuzzy matching for <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/text.html" onclick="to('https://www.elastic.co/guide/en/elasticsearch/reference/current/text.html', 'outbound');" class="external"><code>text</code></a> fields.
We can use our <code>"exact"</code> matcher on index fields that have a <code>keyword</code> data type.</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a9d928527409f4bd5">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a9d928527409f4bd5"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;term&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;{{ field }}&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ value }}&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <h3><a name="review-indices"></a>2.4. Review the indices</h3>
<p>We defined a single index as shown in this section:</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a64e29965ec26ce8f">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a64e29965ec26ce8f"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;indices&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;.zentity-tutorial-index&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;fields&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;user&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;attribute&quot;</span><span class="o">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
          <span class="s2">&quot;matcher&quot;</span><span class="o">:</span> <span class="s2">&quot;fuzzy&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;user.clean&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;attribute&quot;</span><span class="o">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
          <span class="s2">&quot;matcher&quot;</span><span class="o">:</span> <span class="s2">&quot;simple&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;user.phonetic&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;attribute&quot;</span><span class="o">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
          <span class="s2">&quot;matcher&quot;</span><span class="o">:</span> <span class="s2">&quot;simple&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;phone.keyword&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;attribute&quot;</span><span class="o">:</span> <span class="s2">&quot;phone&quot;</span><span class="p">,</span>
          <span class="s2">&quot;matcher&quot;</span><span class="o">:</span> <span class="s2">&quot;exact&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <p>We mapped the <code>"name"</code> attribute to the <code>"user"</code>, <code>"user.clean"</code>, and <code>"user.phonetic"</code> fields and the <code>"phone"</code> attribute
to the <code>"phone.keyword"</code> field in <code>.zentity-tutorial-index</code>.</p>
<blockquote><p><strong>Tip</strong></p>
<p>Notice that the <code>"phone.keyword"</code> field is mapped to our <code>"exact"</code> matcher which uses a <code>term</code> query.
Elasticsearch expects <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-term-query.html" onclick="to('https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-term-query.html', 'outbound');" class="external"><code>term</code></a> queries
to be executed on the exact value of <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/keyword.html" onclick="to('https://www.elastic.co/guide/en/elasticsearch/reference/current/keyword.html', 'outbound');" class="external"><code>keyword</code></a> fields,
whereas <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-query.html" onclick="to('https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-query.html', 'outbound');" class="external"><code>match</code></a> queries apply
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/keyword.html" onclick="to('https://www.elastic.co/guide/en/elasticsearch/reference/current/keyword.html', 'outbound');" class="external">full text</a> analysis to values before performing the search.
You might not get the results you'd expect if you run either a <code>term</code> query on a <code>text</code> field or a <code>match</code> query on a <code>keyword</code> field.</p>
</blockquote>
<h2><a name="resolve-entity"></a>3. Resolve an entity</h2>
<p>Let's use the <a href="/docs/rest-apis/resolution-api">Resolution API</a> to resolve a person with the name "Alice":</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a7ae57bc32b3472c5">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a7ae57bc32b3472c5"><div class="highlight"><pre><span></span><span class="nx">POST</span> <span class="nx">_zentity</span><span class="o">/</span><span class="nx">resolution</span><span class="o">/</span><span class="nx">zentity</span><span class="o">-</span><span class="nx">tutorial</span><span class="o">-</span><span class="nx">person</span>
<span class="p">{</span>
  <span class="s2">&quot;attributes&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;Alice&quot;</span> <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <p>The results will look like this:</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#ad162aa6437dd153c">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="ad162aa6437dd153c"><div class="highlight"><pre><span></span><span class="p">...</span>
</pre></div>
</span>
        </div>
        <p>As expected, we retrieved ...</p>
<h2><a name="conclusion"></a>Conclusion</h2>
<p>Congratulations! You learned how to map multiple attributes to multiple fields in a single index.</p>
<p>The next tutorial will introduce <a href="/docs/basic-usage/multiple-resolver-resolution">multiple attribute resolution</a>. You will
resolve an entity using multiple combinations of attributes mapped to multiple fields of a single index.</p>
<p>&nbsp;</p>
<hr>
<h4>Continue Reading</h4>
<table class="table">
<thead><tr>
<th style="text-align:left">&#8249;</th>
<th style="text-align:left"><a href="/docs/basic-usage/robust-name-matching">Robust Name Matching</a></th>
<th style="text-align:right"><a href="/docs/basic-usage/multiple-resolver-resolution">Multiple Resolver Resolution</a></th>
<th style="text-align:right">&#8250;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
</tbody>
</table>

      </div>
      <div id="bottom">
        <small>
          <div>
            &copy; 2018 <a href="https://github.com/davemoore-" title="Dave Moore" onclick="to('https://github.com/davemoore-');">Dave Moore</a>.
          </div>
          <div>
            Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0" onclick="to('http://www.apache.org/licenses/LICENSE-2.0');">Apache License, Version 2.0</a>.
          </div>
          <div>
            Elasticsearch is a trademark of Elasticsearch BV.
          </div>
          <div>
            This website uses Google Analytics.</div>
        </small>
      </div>
    </div>
  </body>
  <script>$(document).ready(function(){ new ClipboardJS('.copy'); });</script>
</html>
